(this.webpackJsonptetris__game=this.webpackJsonptetris__game||[]).push([[0],{18:function(n,t,e){},22:function(n,t,e){"use strict";e.r(t);var r,o,c,i,a=e(0),u=e.n(a),l=e(10),s=e.n(l),d=(e(18),e(2)),f=function(){return Array.from(Array(20),(function(){return Array(12).fill([0,"clear"])}))},b=function(n,t,e){for(var r=e.x,o=e.y,c=0;c<n.tetromino.length;c+=1)for(var i=0;i<n.tetromino[c].length;i+=1)if(0!==n.tetromino[c][i]&&(!t[c+n.pos.y+o]||!t[c+n.pos.y+o][i+n.pos.x+r]||"clear"!==t[c+n.pos.y+o][i+n.pos.x+r][1]))return!0;return!1},p=e(3),x=e(4),j=x.a.div(r||(r=Object(p.a)(["\ndisplay: grid;\ngrid-template-rows: repeat(",", calc(24vw / ","));\ngrid-template-columns: repeat(",", 1fr);\ngrid-gap: 1px;\nborder: 2px solid #EEFF05;\nwidth: 100%;\nmax-width: 25vw;\nbackground: #111;\nbox-shadow: 5px 5px 5px #111;\n"])),(function(n){return n.height}),(function(n){return n.width}),(function(n){return n.width})),O=x.a.div(o||(o=Object(p.a)(["\nwidth: auto;\nbackground: rgba(",", 0.8);\nborder: ",";\nborder-bottom-color: rgba(",", 0.1);\nborder-right-color: rgba(",", 1);\nborder-top-color: rgba(",", 1);\nborder-left-color: rgba(",", 0.3);\n"])),(function(n){return n.color}),(function(n){return 0===n.type?"0px solid":"4px solid"}),(function(n){return n.color}),(function(n){return n.color}),(function(n){return n.color}),(function(n){return n.color})),h={0:{shape:[[0]],color:"0,0,0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"4, 188, 191"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"0, 46, 145"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"237, 174, 0"},O:{shape:[["O","O"],["O","O"]],color:"170, 227, 57"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"20, 112, 25"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"99, 28, 166"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"186, 30, 30"}},g=function(){var n="IJLOSTZ",t=n[Math.floor(Math.random()*n.length)];return h[t]},m=e(1),v=function(n){var t=n.type;return Object(m.jsx)(O,{type:t,color:h[t].color})},y=u.a.memo(v),w=function(n){var t=n.stage;return Object(m.jsx)(j,{width:t[0].length,height:t.length,children:t.map((function(n){return n.map((function(n,t){return Object(m.jsx)(y,{type:n[0]},t)}))}))})},k=x.a.div(c||(c=Object(p.a)(["\nbox-sizing: border-box;\ndisplay: flex;\nalign-items: center;\nmargin: 0 0 20px 0;\npadding: 20px;\nborder: 4px solid #EEFF05;\nmin-height: 30px;\nwidth: 100%;\nborder-radius: 20px;\ncolor: ",";\nbackground: #000;\nfont-size: 0.8rem;\n"])),(function(n){return n.gameOver?"FF0700":"#999"})),S=function(n){var t=n.gameOver,e=n.text;return Object(m.jsx)(k,{gameover:t,children:e})},E=x.a.button(i||(i=Object(p.a)(["\nbox-sizing: border-box;\nmargin: 0 0 20px 0;\npadding: 20px;\nmin-height: 30px;\nwidth: 100%;\nborder-radius: 20px;\nborder: none;\ncolor: #000;\nbackground: #EEFF05;\noutline: none;\ncursor: pointer;\nfont-size: 1.4rem;\nfont-weight: 700;\n"]))),I=function(n){var t=n.callback;return Object(m.jsx)(E,{onClick:t,children:"Start Game"})},J=e(8),F=function(n,t){var e=Object(a.useState)(f()),r=Object(d.a)(e,2),o=r[0],c=r[1],i=Object(a.useState)(0),u=Object(d.a)(i,2),l=u[0],s=u[1];return Object(a.useEffect)((function(){s(0);var e=function(e){var r=e.map((function(n){return n.map((function(n){return"clear"===n[1]?[0,"clear"]:n}))}));return n.tetromino.forEach((function(t,e){t.forEach((function(t,o){0!==t&&(r[e+n.pos.y][o+n.pos.x]=[t,"".concat(n.collided?"merged":"clear")])}))})),n.collided?(t(),function(n){return n.reduce((function(t,e){return-1===e.findIndex((function(n){return 0===n[0]}))?(s((function(n){return n+1})),t.unshift(new Array(n[0].length).fill([0,"clear"])),t):(t.push(e),t)}),[])}(r)):r};c((function(n){return e(n)}))}),[n.collided,n.pos.x,n.pos.y,n.tetromino,t]),[o,c,l]};var L,T,Z=e.p+"static/media/background.0ee1659d.png",z=x.a.div(L||(L=Object(p.a)(["\nwidth: 100vw;\nheight: 100vh;\nbackground: url(",") rgba(0,0,0,0.6);\nbackground-blend-mode: darken;\nbackground-size: contain;\noverflow: hidden;\n"])),Z),C=x.a.div(T||(T=Object(p.a)(["\ndisplay: flex;\nalign-items: flex-start;\nmax-width: 900px;\npadding: 40px;\nmargin: 0 auto;\n\naside {\n  display: block;\n  width: 100%;\n  max-width: 200px;\n  padding: 0 20px;\n}\n"]))),A=function(){var n=Object(a.useState)(null),t=Object(d.a)(n,2),e=t[0],r=t[1],o=Object(a.useState)(!1),c=Object(d.a)(o,2),i=c[0],u=c[1],l=function(){var n=Object(a.useState)({pos:{x:0,y:0},tetromino:h[0].shape,collided:!1}),t=Object(d.a)(n,2),e=t[0],r=t[1],o=function(n,t){var e=n.map((function(t,e){return n.map((function(n){return n[e]}))}));return t>0?e.map((function(n){return n.reverse()})):e.reverse()},c=Object(a.useCallback)((function(){r({pos:{x:4,y:0},tetromino:g().shape,collided:!1})}),[]);return[e,function(n){var t=n.x,e=n.y,o=n.collided;r((function(n){return Object(J.a)(Object(J.a)({},n),{},{pos:{x:n.pos.x+=t,y:n.pos.y+=e},collided:o})}))},c,function(n,t){var c=JSON.parse(JSON.stringify(e));c.tetromino=o(c.tetromino,t);for(var i=c.pos.x,a=1;b(c,n,{x:0,y:0});)if(c.pos.x+=a,(a=-(a+(a>0?1:-1)))>c.tetromino[0].length)return o(c.tetromino,-t),void(c.pos.x=i);r(c)}]}(),s=Object(d.a)(l,4),p=s[0],x=s[1],j=s[2],O=s[3],v=F(p,j),y=Object(d.a)(v,3),k=y[0],E=y[1],L=function(n){var t=Object(a.useState)(0),e=Object(d.a)(t,2),r=e[0],o=e[1],c=Object(a.useState)(0),i=Object(d.a)(c,2),u=i[0],l=i[1],s=Object(a.useState)(0),f=Object(d.a)(s,2),b=f[0],p=f[1],x=[40,100,300,1200],j=Object(a.useCallback)((function(){n>0&&(o((function(t){return t+x[n-1]*(b+1)})),l((function(t){return t+n})))}),[b,x,n]);return Object(a.useEffect)((function(){j()}),[j,n,r]),[r,o,u,l,b,p]}(y[2]),T=Object(d.a)(L,6),Z=T[0],A=T[1],_=T[2],N=T[3],G=T[4],K=T[5],M=function(n){b(p,k,{x:n,y:0})||x({x:n,y:0})},R=function(){_>10*(G+1)&&(K((function(n){return n+1})),r(1e3/(G+1)+200)),b(p,k,{x:0,y:1})?(p.pos.y<1&&(u(!0),r(null)),x({x:0,y:0,collided:!0})):x({x:0,y:1,collided:!1})},B=function(n){var t=n.keyCode;i||(37===t?M(-1):39===t?M(1):40===t?(r(null),R()):38===t&&O(k,1))};return function(n,t){var e=Object(a.useRef)();Object(a.useEffect)((function(){e.current=n}),[n]),Object(a.useEffect)((function(){if(null!==t){var n=setInterval((function(){e.current()}),t);return function(){clearInterval(n)}}}),[t])}((function(){R()}),e),Object(m.jsx)(z,{role:"button",tabIndex:"0",onKeyDown:function(n){return B(n)},onKeyUp:function(n){var t=n.keyCode;i||40===t&&r(1e3/(G+1)+200)},children:Object(m.jsxs)(C,{children:[Object(m.jsx)(w,{stage:k}),Object(m.jsxs)("aside",{children:[i?Object(m.jsx)(S,{gameOver:i,text:"Game over"}):Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{text:"Score: ".concat(Z)}),Object(m.jsx)(S,{text:"Rows: ".concat(_)}),Object(m.jsx)(S,{text:"Level: ".concat(G)})]}),Object(m.jsx)(I,{callback:function(){E(f()),r(1e3),j(),u(!1),A(0),N(0),K(0)}})]})]})})},_=function(){return Object(m.jsx)("div",{className:"app",children:Object(m.jsx)(A,{})})};s.a.render(Object(m.jsx)(_,{}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.2dade6d8.chunk.js.map